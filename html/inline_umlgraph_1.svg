<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="529px" preserveAspectRatio="none" style="width:922px;height:529px;background:#FFFFFF;" version="1.1" viewBox="0 0 922 529" width="922px" zoomAndPan="magnify"><defs><filter height="300%" id="f1cbl5tumeucdw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="242" cy="16" fill="#000000" filter="url(#f1cbl5tumeucdw)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1cbl5tumeucdw)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="105" x="189.5" y="66"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="85" x="199.5" y="88.457">Call from Timer</text><rect fill="#FEFECE" filter="url(#f1cbl5tumeucdw)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="470" x="7" y="153"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="450" x="17" y="175.457">Iota Api call /api/v1/messages?index=4752414449444f2e7079746861676f726173</text><path d="M497,141 L497,166.5 L477.12,170.5 L497,174.5 L497,200.0547 A0,0 0 0 0 497,200.0547 L913,200.0547 A0,0 0 0 0 913,200.0547 L913,151 L903,141 L497,141 A0,0 0 0 0 497,141 " fill="#FBFB77" filter="url(#f1cbl5tumeucdw)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M903,141 L903,151 L913,151 L903,141 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="503" y="159.4951">index consist of "GRADIDO." + groupAlias</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="503" y="175.8467">in hex format, for example:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="503" y="192.1982">4752414449444f2e7079746861676f726173 =&gt; GRADIDO.pythagoras</text><rect fill="#FEFECE" filter="url(#f1cbl5tumeucdw)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="210" x="137" y="252"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="190" x="147" y="274.457">Add new MessageIDs to intern List</text><path d="M367.5,240 L367.5,265.5 L347.33,269.5 L367.5,273.5 L367.5,299.0547 A0,0 0 0 0 367.5,299.0547 L788.5,299.0547 A0,0 0 0 0 788.5,299.0547 L788.5,250 L778.5,240 L367.5,240 A0,0 0 0 0 367.5,240 " fill="#FBFB77" filter="url(#f1cbl5tumeucdw)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M778.5,240 L778.5,250 L788.5,250 L778.5,240 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="373.5" y="258.4951">Iota store the last 1000 Messages for a index,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="400" x="373.5" y="274.8467">so on every call we get all stored MessageIDs not only the new ones,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="373.5" y="291.1982">so we must filter ourselves</text><rect fill="#FEFECE" filter="url(#f1cbl5tumeucdw)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="263" x="110.5" y="339"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="243" x="120.5" y="361.457">Send new MessageIDs to MessageValidator</text><rect fill="#FEFECE" filter="url(#f1cbl5tumeucdw)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="244" x="120" y="418"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="224" x="130" y="440.457">Remove old MessageIDs from intern List</text><path d="M384.5,414 L384.5,431.5 L364.03,435.5 L384.5,439.5 L384.5,456.7031 A0,0 0 0 0 384.5,456.7031 L633.5,456.7031 A0,0 0 0 0 633.5,456.7031 L633.5,424 L623.5,414 L384.5,414 A0,0 0 0 0 384.5,414 " fill="#FBFB77" filter="url(#f1cbl5tumeucdw)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M623.5,414 L623.5,424 L633.5,424 L623.5,414 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="390.5" y="432.4951">remove all MessageIDs from intern List,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="390.5" y="448.8467">which are not longer returned from Iota</text><ellipse cx="242" cy="507" fill="none" filter="url(#f1cbl5tumeucdw)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="242.5" cy="507.5" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><!--MD5=[02999cfea5f05de97b6e50e7060a3181]
link start to Call from Timer--><path d="M242,26.11 C242,35.01 242,48.9 242,60.67 " fill="none" id="start-to-Call from Timer" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242,65.9,246,56.9,242,60.9,238,56.9,242,65.9" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[faca708f8445464607b58de544007f78]
link Call from Timer to Iota Api call /api/v1/messages?index=4752414449444f2e7079746861676f726173--><path d="M242,101.29 C242,114.57 242,133.19 242,147.63 " fill="none" id="Call from Timer-to-Iota Api call /api/v1/messages?index=4752414449444f2e7079746861676f726173" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242,152.74,246,143.74,242,147.74,238,143.74,242,152.74" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bd3dda372ca38dac8d7bd3aaef798edc]
link Iota Api call /api/v1/messages?index=4752414449444f2e7079746861676f726173 to Add new MessageIDs to intern List--><path d="M242,188.4 C242,204.53 242,228.93 242,246.56 " fill="none" id="Iota Api call /api/v1/messages?index=4752414449444f2e7079746861676f726173-to-Add new MessageIDs to intern List" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242,251.8,246,242.8,242,246.8,238,242.8,242,251.8" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[27a46e06a2338c866d5a6e04f4f920fe]
link Add new MessageIDs to intern List to Send new MessageIDs to MessageValidator--><path d="M242,287.29 C242,300.57 242,319.19 242,333.63 " fill="none" id="Add new MessageIDs to intern List-to-Send new MessageIDs to MessageValidator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242,338.74,246,329.74,242,333.74,238,329.74,242,338.74" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f2f6293a0a80b70fc79e5fed9d0e5888]
link Send new MessageIDs to MessageValidator to Remove old MessageIDs from intern List--><path d="M242,374.21 C242,385.51 242,400.55 242,412.77 " fill="none" id="Send new MessageIDs to MessageValidator-to-Remove old MessageIDs from intern List" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242,417.82,246,408.82,242,412.82,238,408.82,242,417.82" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[96deec58db0b99707e1cee80f497cb45]
link Remove old MessageIDs from intern List to end--><path d="M242,453.32 C242,465.06 242,480.56 242,491.7 " fill="none" id="Remove old MessageIDs from intern List-to-end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242,496.78,246,487.78,242,491.78,238,487.78,242,496.78" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[071ee2421199c8771e03ab8697d78a18]
@startuml inline_umlgraph_1.svg
(*) - -> "Call from Timer"
- -> "Iota Api call /api/v1/messages?index=4752414449444f2e7079746861676f726173"
note right
 index consist of "GRADIDO." + groupAlias
 in hex format, for example:
 4752414449444f2e7079746861676f726173 => GRADIDO.pythagoras
end note
- -> "Add new MessageIDs to intern List"
note right
  Iota store the last 1000 Messages for a index,
  so on every call we get all stored MessageIDs not only the new ones,
  so we must filter ourselves
end note
- -> "Send new MessageIDs to MessageValidator"
- -> "Remove old MessageIDs from intern List"
note right
  remove all MessageIDs from intern List,
  which are not longer returned from Iota
end note
- -> (*)
@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>